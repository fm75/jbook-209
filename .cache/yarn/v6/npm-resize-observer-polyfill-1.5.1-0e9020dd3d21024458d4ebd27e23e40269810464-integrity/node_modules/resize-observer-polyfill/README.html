

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ResizeObserver Polyfill &#8212; Colab Experiment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../../../../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-index--0afa1ebdab0bb23b98b56d34c23d9f57.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-variables--ffc7f74dcb1b9eecba2dbcbc22818714.css" />
    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script src="../../../../../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  
  <h1 class="site-logo" id="site-title">Colab Experiment</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../README.html">
   jbook-209
  </a>
 </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-resize-observer-polyfill-1.5.1-0e9020dd3d21024458d4ebd27e23e40269810464-integrity/node_modules/resize-observer-polyfill/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/fm75/jbook-209"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/fm75/jbook-209/issues/new?title=Issue%20on%20page%20%2F.cache/yarn/v6/npm-resize-observer-polyfill-1.5.1-0e9020dd3d21024458d4ebd27e23e40269810464-integrity/node_modules/resize-observer-polyfill/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/fm75/jbook-209/edit/master/.cache/yarn/v6/npm-resize-observer-polyfill-1.5.1-0e9020dd3d21024458d4ebd27e23e40269810464-integrity/node_modules/resize-observer-polyfill/README.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#browser-support">
   Browser Support
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage-example">
   Usage Example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#observation-strategy">
   Observation Strategy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#limitations">
   Limitations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#building-and-testing">
   Building and Testing
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="resizeobserver-polyfill">
<h1>ResizeObserver Polyfill<a class="headerlink" href="#resizeobserver-polyfill" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://travis-ci.org/que-etc/resize-observer-polyfill"><img alt="Build Status" src="https://travis-ci.org/que-etc/resize-observer-polyfill.svg?branch=master" /></a></p>
<p>A polyfill for the Resize Observer API.</p>
<p>Implementation is based on the MutationObserver and uses Mutation Events as a fall back if the first one is not supported, so there will be no polling unless DOM changes. Doesn’t modify observed elements. Handles CSS transitions/animations and can possibly observe changes caused by dynamic CSS pseudo-classes, e.g. by <code class="docutils literal notranslate"><span class="pre">:hover</span></code>.</p>
<p>Follows the <a class="reference external" href="http://rawgit.com/WICG/ResizeObserver/master/index.html">spec</a> and the native implementation. The size is <em>2.44 KiB</em> when minified and gzipped.</p>
<p><a class="reference external" href="http://que-etc.github.io/resize-observer-polyfill">Live demo</a> (has style problems in IE10 and lower).</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>From NPM:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm install resize-observer-polyfill --save-dev
</pre></div>
</div>
<p>~~From Bower:~~ (will be removed with the next major release)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>bower install resize-observer-polyfill --save-dev
</pre></div>
</div>
</div>
<div class="section" id="browser-support">
<h2>Browser Support<a class="headerlink" href="#browser-support" title="Permalink to this headline">¶</a></h2>
<p>Polyfill has been tested in the following browsers:</p>
<p><a class="reference external" href="https://saucelabs.com/beta/builds/303f5344a7214ba5b62bc7079a15d376"><img alt="Build Status" src="https://saucelabs.com/browser-matrix/que-etc.svg" /></a></p>
<p><strong>NOTE:</strong> Internet Explorer 8 and its earlier versions are not supported.</p>
</div>
<div class="section" id="usage-example">
<h2>Usage Example<a class="headerlink" href="#usage-example" title="Permalink to this headline">¶</a></h2>
<p>It’s recommended to use this library in the form of a <a class="reference external" href="https://github.com/sindresorhus/ponyfill">ponyfill</a>, which doesn’t inflict modifications of the global object.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">ResizeObserver</span> <span class="nx">from</span> <span class="s1">&#39;resize-observer-polyfill&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">ro</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ResizeObserver</span><span class="p">((</span><span class="nx">entries</span><span class="p">,</span> <span class="nx">observer</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">entry</span> <span class="k">of</span> <span class="nx">entries</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="p">{</span><span class="nx">left</span><span class="p">,</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">}</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">contentRect</span><span class="p">;</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Element:&#39;</span><span class="p">,</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Element&#39;s size: </span><span class="si">${</span> <span class="nx">width</span> <span class="si">}</span><span class="sb">px x </span><span class="si">${</span> <span class="nx">height</span> <span class="si">}</span><span class="sb">px`</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Element&#39;s paddings: </span><span class="si">${</span> <span class="nx">top</span> <span class="si">}</span><span class="sb">px ; </span><span class="si">${</span> <span class="nx">left</span> <span class="si">}</span><span class="sb">px`</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">ro</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
</pre></div>
</div>
<p>Package’s main file is a ES5 <a class="reference external" href="https://github.com/umdjs/umd">UMD</a> bundle that will be swapped with the ES6 modules version for those bundlers that are aware of the <a class="reference external" href="https://github.com/rollup/rollup/wiki/pkg.module">module</a> field, e.g. for <a class="reference external" href="https://github.com/rollup/rollup">Rollup</a> or webpack 2+.</p>
<p><strong>Note</strong>: global version of the polyfill (<code class="docutils literal notranslate"><span class="pre">dist/ResizeObserver.global</span></code>) is deprecated and will be removed in the next major release.</p>
</div>
<div class="section" id="observation-strategy">
<h2>Observation Strategy<a class="headerlink" href="#observation-strategy" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, this implementation primarily (but not solely) relies on Mutation Observer with a fallback to Mutation Events for IE 9 and IE 10.</p>
<p>Speaking of Mutation Events as a fallback approach: they might not be as ugly as they are being rendered, particularly when their calls are batched, throttled and there is no need to analyze changes. Given that, they won’t interrupt browser’s reflow/repaint cycles (same for MutationObserver) and may even outperform Internet Explorer’s implementation of MO causing little to no performance degradation. In contemporary browsers (Chrome, Firefox, etc.) Mutation Observer slows down <a class="reference external" href="https://jsfiddle.net/que_etc/gaqLe8rn/">the suite</a> that includes 200 iterations of adding/removing elements, changing attributes and modifying text data by less than 1%. Internet Explorer gives different results with MO slowing down the same suite by 2-3% while Mutation Events show the difference of ~0.6%.</p>
<p>As for the reasons why other approaches, namely the iframe/object and <code class="docutils literal notranslate"><span class="pre">scroll</span></code> strategies, were ruled out:</p>
<ul class="simple">
<li><p>They require the observed element to be non-statically positioned.</p></li>
<li><p>You can’t apply them directly to quite a number of elements: <code class="docutils literal notranslate"><span class="pre">&lt;img&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;textarea&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;tr&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;tbody&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;thead&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;table&gt;</span></code>, etc. For most of them you would need to keep an extra <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> wrapper and almost all instances of the SVGGraphicsElement will be out of scope.</p></li>
<li><p>The ResizeObserver spec requires to deliver notifications when a non-empty visible element becomes hidden, i.e. when either this element directly or one of its parent nodes receive the <code class="docutils literal notranslate"><span class="pre">display:</span> <span class="pre">none</span></code> state. Same goes for when it’s being removed from or added to the DOM. It’s not possible to handle these cases merely by using former approaches, so you’d still need to either subscribe for DOM mutations or to continuously check the element’s state.</p></li>
</ul>
<p>And though every approach has its own limitations, I reckon that it’d be too much of a trade-off to have those constraints when building a polyfill.</p>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Notifications are delivered ~20ms after actual changes happen.</p></li>
<li><p>Changes caused by dynamic pseudo-classes, e.g. <code class="docutils literal notranslate"><span class="pre">:hover</span></code> and <code class="docutils literal notranslate"><span class="pre">:focus</span></code>, are not tracked. As a workaround you could add a short transition which would trigger the <code class="docutils literal notranslate"><span class="pre">transitionend</span></code> event when an element receives one of the former classes (<a class="reference external" href="https://jsfiddle.net/que_etc/7fudzqng/">example</a>).</p></li>
<li><p>Delayed transitions will receive only one notification with the latest dimensions of an element.</p></li>
</ul>
</div>
<div class="section" id="building-and-testing">
<h2>Building and Testing<a class="headerlink" href="#building-and-testing" title="Permalink to this headline">¶</a></h2>
<p>To build polyfill. Creates UMD bundle in the <code class="docutils literal notranslate"><span class="pre">dist</span></code> folder:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm run build
</pre></div>
</div>
<p>To run a code style test:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm run test:lint
</pre></div>
</div>
<p>Running unit tests:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm run test:spec
</pre></div>
</div>
<p>To test in a browser that is not present in karma’s config file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm run test:spec:custom
</pre></div>
</div>
<p>Testing against a native implementation:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm run test:spec:native
</pre></div>
</div>
<p><strong>NOTE:</strong> after you invoke <code class="docutils literal notranslate"><span class="pre">spec:native</span></code> and <code class="docutils literal notranslate"><span class="pre">spec:custom</span></code> commands head to the <code class="docutils literal notranslate"><span class="pre">http://localhost:9876/debug.html</span></code> page.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-resize-observer-polyfill-1.5.1-0e9020dd3d21024458d4ebd27e23e40269810464-integrity/node_modules/resize-observer-polyfill"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Fred Mitchell<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../../../../../_static/js/index.js"></script>
    
  </body>
</html>