

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> &#8212; Colab Experiment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../../../../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-index--0afa1ebdab0bb23b98b56d34c23d9f57.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-variables--ffc7f74dcb1b9eecba2dbcbc22818714.css" />
    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script src="../../../../../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  
  <h1 class="site-logo" id="site-title">Colab Experiment</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../README.html">
   jbook-209
  </a>
 </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-bn-js-4.11.9-26d556829458f9d1e81fc48952493d0ba3507828-integrity/node_modules/bn.js/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/fm75/jbook-209"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/fm75/jbook-209/issues/new?title=Issue%20on%20page%20%2F.cache/yarn/v6/npm-bn-js-4.11.9-26d556829458f9d1e81fc48952493d0ba3507828-integrity/node_modules/bn.js/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/fm75/jbook-209/edit/master/.cache/yarn/v6/npm-bn-js-4.11.9-26d556829458f9d1e81fc48952493d0ba3507828-integrity/node_modules/bn.js/README.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install">
   Install
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notation">
   Notation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#prefixes">
     Prefixes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#postfixes">
     Postfixes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#examples">
     Examples
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#instructions">
   Instructions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#utilities">
     Utilities
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#arithmetics">
     Arithmetics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bit-operations">
     Bit operations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reduction">
     Reduction
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fast-reduction">
   Fast reduction
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reduction-context">
     Reduction context
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#converting-numbers">
     Converting numbers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#red-instructions">
     Red instructions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   LICENSE
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="img-src-logo-png-alt-bn-js-width-160-height-160">
<h1><img src="./logo.png" alt="bn.js" width="160" height="160" /><a class="headerlink" href="#img-src-logo-png-alt-bn-js-width-160-height-160" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>BigNum in pure javascript</p>
</div></blockquote>
<p><a class="reference external" href="http://travis-ci.org/indutny/bn.js"><img alt="Build Status" src="https://secure.travis-ci.org/indutny/bn.js.png" /></a></p>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">--save</span> <span class="pre">bn.js</span></code></p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">BN</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;bn.js&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BN</span><span class="p">(</span><span class="s1">&#39;dead&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BN</span><span class="p">(</span><span class="s1">&#39;101010&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>  <span class="c1">// 57047</span>
</pre></div>
</div>
<p><strong>Note</strong>: decimals are not supported in this library.</p>
</div>
<div class="section" id="notation">
<h2>Notation<a class="headerlink" href="#notation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prefixes">
<h3>Prefixes<a class="headerlink" href="#prefixes" title="Permalink to this headline">¶</a></h3>
<p>There are several prefixes to instructions that affect the way the work. Here
is the list of them in the order of appearance in the function name:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> - perform operation in-place, storing the result in the host object (on
which the method was invoked). Might be used to avoid number allocation costs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u</span></code> - unsigned, ignore the sign of operands when performing operation, or
always return positive value. Second case applies to reduction operations
like <code class="docutils literal notranslate"><span class="pre">mod()</span></code>. In such cases if the result will be negative - modulo will be
added to the result to make it positive</p></li>
</ul>
</div>
<div class="section" id="postfixes">
<h3>Postfixes<a class="headerlink" href="#postfixes" title="Permalink to this headline">¶</a></h3>
<p>The only available postfix at the moment is:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> - which means that the argument of the function must be a plain JavaScript
Number. Decimals are not supported.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a.iadd(b)</span></code> - perform addition on <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>, storing the result in <code class="docutils literal notranslate"><span class="pre">a</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.umod(b)</span></code> - reduce <code class="docutils literal notranslate"><span class="pre">a</span></code> modulo <code class="docutils literal notranslate"><span class="pre">b</span></code>, returning positive value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.iushln(13)</span></code> - shift bits of <code class="docutils literal notranslate"><span class="pre">a</span></code> left by 13</p></li>
</ul>
</div>
</div>
<div class="section" id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this headline">¶</a></h2>
<p>Prefixes/postfixes are put in parens at the of the line. <code class="docutils literal notranslate"><span class="pre">endian</span></code> - could be
either <code class="docutils literal notranslate"><span class="pre">le</span></code> (little-endian) or <code class="docutils literal notranslate"><span class="pre">be</span></code> (big-endian).</p>
<div class="section" id="utilities">
<h3>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a.clone()</span></code> - clone number</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.toString(base,</span> <span class="pre">length)</span></code> - convert to base-string and pad with zeroes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.toNumber()</span></code> - convert to Javascript Number (limited to 53 bits)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.toJSON()</span></code> - convert to JSON compatible hex string (alias of <code class="docutils literal notranslate"><span class="pre">toString(16)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.toArray(endian,</span> <span class="pre">length)</span></code> - convert to byte <code class="docutils literal notranslate"><span class="pre">Array</span></code>, and optionally zero
pad to length, throwing if already exceeding</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.toArrayLike(type,</span> <span class="pre">endian,</span> <span class="pre">length)</span></code> - convert to an instance of <code class="docutils literal notranslate"><span class="pre">type</span></code>,
which must behave like an <code class="docutils literal notranslate"><span class="pre">Array</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.toBuffer(endian,</span> <span class="pre">length)</span></code> - convert to Node.js Buffer (if available). For
compatibility with browserify and similar tools, use this instead:
<code class="docutils literal notranslate"><span class="pre">a.toArrayLike(Buffer,</span> <span class="pre">endian,</span> <span class="pre">length)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.bitLength()</span></code> - get number of bits occupied</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.zeroBits()</span></code> - return number of less-significant consequent zero bits
(example: <code class="docutils literal notranslate"><span class="pre">1010000</span></code> has 4 zero bits)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.byteLength()</span></code> - return number of bytes occupied</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.isNeg()</span></code> - true if the number is negative</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.isEven()</span></code> - no comments</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.isOdd()</span></code> - no comments</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.isZero()</span></code> - no comments</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.cmp(b)</span></code> - compare numbers and return <code class="docutils literal notranslate"><span class="pre">-1</span></code> (a <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> b), <code class="docutils literal notranslate"><span class="pre">0</span></code> (a <code class="docutils literal notranslate"><span class="pre">==</span></code> b), or <code class="docutils literal notranslate"><span class="pre">1</span></code> (a <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> b)
depending on the comparison result (<code class="docutils literal notranslate"><span class="pre">ucmp</span></code>, <code class="docutils literal notranslate"><span class="pre">cmpn</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.lt(b)</span></code> - <code class="docutils literal notranslate"><span class="pre">a</span></code> less than <code class="docutils literal notranslate"><span class="pre">b</span></code> (<code class="docutils literal notranslate"><span class="pre">n</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.lte(b)</span></code> - <code class="docutils literal notranslate"><span class="pre">a</span></code> less than or equals <code class="docutils literal notranslate"><span class="pre">b</span></code> (<code class="docutils literal notranslate"><span class="pre">n</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.gt(b)</span></code> - <code class="docutils literal notranslate"><span class="pre">a</span></code> greater than <code class="docutils literal notranslate"><span class="pre">b</span></code> (<code class="docutils literal notranslate"><span class="pre">n</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.gte(b)</span></code> - <code class="docutils literal notranslate"><span class="pre">a</span></code> greater than or equals <code class="docutils literal notranslate"><span class="pre">b</span></code> (<code class="docutils literal notranslate"><span class="pre">n</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.eq(b)</span></code> - <code class="docutils literal notranslate"><span class="pre">a</span></code> equals <code class="docutils literal notranslate"><span class="pre">b</span></code> (<code class="docutils literal notranslate"><span class="pre">n</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.toTwos(width)</span></code> - convert to two’s complement representation, where <code class="docutils literal notranslate"><span class="pre">width</span></code> is bit width</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.fromTwos(width)</span></code> - convert from two’s complement representation, where <code class="docutils literal notranslate"><span class="pre">width</span></code> is the bit width</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BN.isBN(object)</span></code> - returns true if the supplied <code class="docutils literal notranslate"><span class="pre">object</span></code> is a BN.js instance</p></li>
</ul>
</div>
<div class="section" id="arithmetics">
<h3>Arithmetics<a class="headerlink" href="#arithmetics" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a.neg()</span></code> - negate sign (<code class="docutils literal notranslate"><span class="pre">i</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.abs()</span></code> - absolute value (<code class="docutils literal notranslate"><span class="pre">i</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.add(b)</span></code> - addition (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">in</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.sub(b)</span></code> - subtraction (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">in</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.mul(b)</span></code> - multiply (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">in</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.sqr()</span></code> - square (<code class="docutils literal notranslate"><span class="pre">i</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.pow(b)</span></code> - raise <code class="docutils literal notranslate"><span class="pre">a</span></code> to the power of <code class="docutils literal notranslate"><span class="pre">b</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.div(b)</span></code> - divide (<code class="docutils literal notranslate"><span class="pre">divn</span></code>, <code class="docutils literal notranslate"><span class="pre">idivn</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.mod(b)</span></code> - reduct (<code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code>) (but no <code class="docutils literal notranslate"><span class="pre">umodn</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.divRound(b)</span></code> - rounded division</p></li>
</ul>
</div>
<div class="section" id="bit-operations">
<h3>Bit operations<a class="headerlink" href="#bit-operations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a.or(b)</span></code> - or (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">iu</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.and(b)</span></code> - and (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">iu</span></code>, <code class="docutils literal notranslate"><span class="pre">andln</span></code>) (NOTE: <code class="docutils literal notranslate"><span class="pre">andln</span></code> is going to be replaced
with <code class="docutils literal notranslate"><span class="pre">andn</span></code> in future)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.xor(b)</span></code> - xor (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">iu</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.setn(b)</span></code> - set specified bit to <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.shln(b)</span></code> - shift left (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">iu</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.shrn(b)</span></code> - shift right (<code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">iu</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.testn(b)</span></code> - test if specified bit is set</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.maskn(b)</span></code> - clear bits with indexes higher or equal to <code class="docutils literal notranslate"><span class="pre">b</span></code> (<code class="docutils literal notranslate"><span class="pre">i</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.bincn(b)</span></code> - add <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;&lt;</span> <span class="pre">b</span></code> to the number</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.notn(w)</span></code> - not (for the width specified by <code class="docutils literal notranslate"><span class="pre">w</span></code>) (<code class="docutils literal notranslate"><span class="pre">i</span></code>)</p></li>
</ul>
</div>
<div class="section" id="reduction">
<h3>Reduction<a class="headerlink" href="#reduction" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a.gcd(b)</span></code> - GCD</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.egcd(b)</span></code> - Extended GCD results (<code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">a:</span> <span class="pre">...,</span> <span class="pre">b:</span> <span class="pre">...,</span> <span class="pre">gcd:</span> <span class="pre">...</span> <span class="pre">}</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.invm(b)</span></code> - inverse <code class="docutils literal notranslate"><span class="pre">a</span></code> modulo <code class="docutils literal notranslate"><span class="pre">b</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="fast-reduction">
<h2>Fast reduction<a class="headerlink" href="#fast-reduction" title="Permalink to this headline">¶</a></h2>
<p>When doing lots of reductions using the same modulo, it might be beneficial to
use some tricks: like <a class="reference external" href="https://en.wikipedia.org/wiki/Montgomery_modular_multiplication">Montgomery multiplication</a>, or using special algorithm
for <a class="reference external" href="https://en.wikipedia.org/wiki/Mersenne_prime">Mersenne Prime</a>.</p>
<div class="section" id="reduction-context">
<h3>Reduction context<a class="headerlink" href="#reduction-context" title="Permalink to this headline">¶</a></h3>
<p>To enable this tricks one should create a reduction context:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">red</span> <span class="o">=</span> <span class="nx">BN</span><span class="p">.</span><span class="nx">red</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">num</span></code> is just a BN instance.</p>
<p>Or:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">red</span> <span class="o">=</span> <span class="nx">BN</span><span class="p">.</span><span class="nx">red</span><span class="p">(</span><span class="nx">primeName</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">primeName</span></code> is either of these <a class="reference external" href="https://en.wikipedia.org/wiki/Mersenne_prime">Mersenne Primes</a>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'k256'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'p224'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'p192'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'p25519'</span></code></p></li>
</ul>
<p>Or:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">red</span> <span class="o">=</span> <span class="nx">BN</span><span class="p">.</span><span class="nx">mont</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
</pre></div>
</div>
<p>To reduce numbers with <a class="reference external" href="https://en.wikipedia.org/wiki/Montgomery_modular_multiplication">Montgomery trick</a>. <code class="docutils literal notranslate"><span class="pre">.mont()</span></code> is generally faster than
<code class="docutils literal notranslate"><span class="pre">.red(num)</span></code>, but slower than <code class="docutils literal notranslate"><span class="pre">BN.red(primeName)</span></code>.</p>
</div>
<div class="section" id="converting-numbers">
<h3>Converting numbers<a class="headerlink" href="#converting-numbers" title="Permalink to this headline">¶</a></h3>
<p>Before performing anything in reduction context - numbers should be converted
to it. Usually, this means that one should:</p>
<ul class="simple">
<li><p>Convert inputs to reducted ones</p></li>
<li><p>Operate on them in reduction context</p></li>
<li><p>Convert outputs back from the reduction context</p></li>
</ul>
<p>Here is how one may convert numbers to <code class="docutils literal notranslate"><span class="pre">red</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">redA</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">toRed</span><span class="p">(</span><span class="nx">red</span><span class="p">);</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">red</span></code> is a reduction context created using instructions above</p>
<p>Here is how to convert them back:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">redA</span><span class="p">.</span><span class="nx">fromRed</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="red-instructions">
<h3>Red instructions<a class="headerlink" href="#red-instructions" title="Permalink to this headline">¶</a></h3>
<p>Most of the instructions from the very start of this readme have their
counterparts in red context:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a.redAdd(b)</span></code>, <code class="docutils literal notranslate"><span class="pre">a.redIAdd(b)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redSub(b)</span></code>, <code class="docutils literal notranslate"><span class="pre">a.redISub(b)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redShl(num)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redMul(b)</span></code>, <code class="docutils literal notranslate"><span class="pre">a.redIMul(b)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redSqr()</span></code>, <code class="docutils literal notranslate"><span class="pre">a.redISqr()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redSqrt()</span></code> - square root modulo reduction context’s prime</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redInvm()</span></code> - modular inverse of the number</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redNeg()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.redPow(b)</span></code> - modular exponentiation</p></li>
</ul>
</div>
</div>
<div class="section" id="license">
<h2>LICENSE<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>This software is licensed under the MIT License.</p>
<p>Copyright Fedor Indutny, 2015.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
“Software”), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the
following conditions:</p>
<p>The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-bn-js-4.11.9-26d556829458f9d1e81fc48952493d0ba3507828-integrity/node_modules/bn.js"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Fred Mitchell<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../../../../../_static/js/index.js"></script>
    
  </body>
</html>