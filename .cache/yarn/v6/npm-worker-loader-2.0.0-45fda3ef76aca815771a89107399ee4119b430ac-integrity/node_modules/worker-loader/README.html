

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inlined &#8212; Colab Experiment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../../../../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-index--0afa1ebdab0bb23b98b56d34c23d9f57.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-variables--ffc7f74dcb1b9eecba2dbcbc22818714.css" />
    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script src="../../../../../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  
  <h1 class="site-logo" id="site-title">Colab Experiment</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../README.html">
   jbook-209
  </a>
 </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-worker-loader-2.0.0-45fda3ef76aca815771a89107399ee4119b430ac-integrity/node_modules/worker-loader/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/fm75/jbook-209"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/fm75/jbook-209/issues/new?title=Issue%20on%20page%20%2F.cache/yarn/v6/npm-worker-loader-2.0.0-45fda3ef76aca815771a89107399ee4119b430ac-integrity/node_modules/worker-loader/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/fm75/jbook-209/edit/master/.cache/yarn/v6/npm-worker-loader-2.0.0-45fda3ef76aca815771a89107399ee4119b430ac-integrity/node_modules/worker-loader/README.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            
        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <p><a class="reference external" href="https://npmjs.com/package/worker-loader"><img alt="npm" src="https://img.shields.io/npm/v/worker-loader.svg" /></a>
<a class="reference external" href="https://nodejs.org"><img alt="node" src="https://img.shields.io/node/v/cache-loader.svg" /></a>
<a class="reference external" href="https://david-dm.org/webpack-contrib/worker-loader"><img alt="deps" src="https://david-dm.org/webpack-contrib/worker-loader.svg" /></a>
<a class="reference external" href="https://travis-ci.org/webpack-contrib/worker-loader"><img alt="test" src="http://img.shields.io/travis/webpack-contrib/worker-loader.svg" /></a>
<a class="reference external" href="https://codecov.io/gh/webpack-contrib/cache-loader"><img alt="coverage" src="https://codecov.io/gh/webpack-contrib/cache-loader/branch/master/graph/badge.svg" /></a>
<a class="reference external" href="https://gitter.im/webpack/webpack"><img alt="chat" src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" /></a></p>
<div align="center">
  <a href="https://github.com/webpack/webpack">
    <img width="200" height="200" src="https://cdn.rawgit.com/webpack/media/e7485eb2/logo/icon.svg">
  </a>
  <h1>Worker Loader</h1>
  <p>This loader registers the script as <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API">Web Worker</a><p>
</div>
<h2 align="center">Install</h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm i -D worker-loader
</pre></div>
</div>
<h2 align="center"><a href="https://webpack.js.org/concepts/loaders">Usage</a></h2>
<div class="section" id="inlined">
<h1><code class="docutils literal notranslate"><span class="pre">Inlined</span></code><a class="headerlink" href="#inlined" title="Permalink to this headline">¶</a></h1>
<p><strong>App.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">Worker</span> <span class="nx">from</span> <span class="s1">&#39;worker-loader!./Worker.js&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="config">
<h1><code class="docutils literal notranslate"><span class="pre">Config</span></code><a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h1>
<p><strong>webpack.config.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.worker\.js$/</span><span class="p">,</span>
        <span class="nx">use</span><span class="o">:</span> <span class="p">{</span> <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>App.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">Worker</span> <span class="nx">from</span> <span class="s1">&#39;./file.worker.js&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Worker</span><span class="p">();</span>

<span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span> <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span> <span class="p">});</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{};</span>

<span class="nx">worker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{});</span>
</pre></div>
</div>
<h2 align="center">Options</h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Name</p></th>
<th class="text-align:center head"><p>Type</p></th>
<th class="text-align:center head"><p>Default</p></th>
<th class="text-align:left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p><a class="reference external" href="#name"><strong><code class="docutils literal notranslate"><span class="pre">name</span></code></strong></a></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">{String}</span></code></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">[hash].worker.js</span></code></p></td>
<td class="text-align:left"><p>Set a custom name for the output script</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p><a class="reference external" href="#inline"><strong><code class="docutils literal notranslate"><span class="pre">inline</span></code></strong></a></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">{Boolean}</span></code></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td class="text-align:left"><p>Inline the worker as a BLOB</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p><a class="reference external" href="#fallback"><strong><code class="docutils literal notranslate"><span class="pre">fallback</span></code></strong></a></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">{Boolean}</span></code></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td class="text-align:left"><p>Require a fallback for non-worker supporting environments</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p><a class="reference external" href="#publicPath"><strong><code class="docutils literal notranslate"><span class="pre">publicPath</span></code></strong></a></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">{String}</span></code></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td class="text-align:left"><p>Override the path from which worker scripts are downloaded</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="name">
<h1><code class="docutils literal notranslate"><span class="pre">name</span></code><a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h1>
<p>To set a custom name for the output script, use the <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter. The name may contain the string <code class="docutils literal notranslate"><span class="pre">[hash]</span></code>, which will be replaced with a content dependent hash for caching purposes. When using <code class="docutils literal notranslate"><span class="pre">name</span></code> alone <code class="docutils literal notranslate"><span class="pre">[hash]</span></code> is omitted.</p>
<p><em>webpack.config.js</em>*</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span><span class="p">,</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;WorkerName.[hash].js&#39;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="inline">
<h1><code class="docutils literal notranslate"><span class="pre">inline</span></code><a class="headerlink" href="#inline" title="Permalink to this headline">¶</a></h1>
<p>You can also inline the worker as a BLOB with the <code class="docutils literal notranslate"><span class="pre">inline</span></code> parameter</p>
<p><strong>webpack.config.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span><span class="p">,</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">inline</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<blockquote>
<div><p>ℹ️  Inline mode will also create chunks for browsers without support for inline workers, to disable this behavior just set <code class="docutils literal notranslate"><span class="pre">fallback</span></code> parameter as <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
</div></blockquote>
<p><strong>webpack.config.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">inline</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">fallback</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="fallback">
<h1><code class="docutils literal notranslate"><span class="pre">fallback</span></code><a class="headerlink" href="#fallback" title="Permalink to this headline">¶</a></h1>
<p>Require a fallback for non-worker supporting environments</p>
<p><strong>webpack.config.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">fallback</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="publicpath">
<h1><code class="docutils literal notranslate"><span class="pre">publicPath</span></code><a class="headerlink" href="#publicpath" title="Permalink to this headline">¶</a></h1>
<p>Overrides the path from which worker scripts are downloaded. If not specified, the same public path used for other
webpack assets is used</p>
<p><strong>webpack.config.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;/scripts/workers/&#39;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<h2 align="center">Examples</h2>
<p>The worker file can import dependencies just like any other file</p>
<p><strong>Worker.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;lodash&#39;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;foo&#39;</span> <span class="p">}</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>

<span class="c1">// Post data to parent thread</span>
<span class="nx">self</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;foo&#39;</span> <span class="p">})</span>

<span class="c1">// Respond to message from parent thread</span>
<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">))</span>  
</pre></div>
</div>
</div>
<div class="section" id="integrating-with-es2015-modules">
<h1><code class="docutils literal notranslate"><span class="pre">Integrating</span> <span class="pre">with</span> <span class="pre">ES2015</span> <span class="pre">Modules</span></code><a class="headerlink" href="#integrating-with-es2015-modules" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>ℹ️  You can even use ES2015 Modules if you have the <a class="reference external" href="https://github.com/babel/babel-loader"><code class="docutils literal notranslate"><span class="pre">babel-loader</span></code></a> configured.</p>
</div></blockquote>
<p><strong>Worker.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">_</span> <span class="nx">from</span> <span class="s1">&#39;lodash&#39;</span>

<span class="kr">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;foo&#39;</span> <span class="p">}</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>

<span class="c1">// Post data to parent thread</span>
<span class="nx">self</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;foo&#39;</span> <span class="p">})</span>

<span class="c1">// Respond to message from parent thread</span>
<span class="nx">self</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="integrating-with-typescript">
<h1><code class="docutils literal notranslate"><span class="pre">Integrating</span> <span class="pre">with</span> <span class="pre">TypeScript</span></code><a class="headerlink" href="#integrating-with-typescript" title="Permalink to this headline">¶</a></h1>
<p>To integrate with TypeScript, you will need to define a custom module for the exports of your worker</p>
<p><strong>typings/custom.d.ts</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">declare</span> <span class="nx">module</span> <span class="s2">&quot;worker-loader!*&quot;</span> <span class="p">{</span>
  <span class="kr">class</span> <span class="nx">WebpackWorker</span> <span class="kr">extends</span> <span class="nx">Worker</span> <span class="p">{</span>
    <span class="kr">constructor</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kr">export</span> <span class="k">default</span> <span class="nx">WebpackWorker</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Worker.ts</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">ctx</span>: <span class="kt">Worker</span> <span class="o">=</span> <span class="nx">self</span> <span class="kr">as</span> <span class="nx">any</span><span class="p">;</span>

<span class="c1">// Post data to parent thread</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s2">&quot;foo&quot;</span> <span class="p">});</span>

<span class="c1">// Respond to message from parent thread</span>
<span class="nx">ctx</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">));</span>
</pre></div>
</div>
<p><strong>App.ts</strong></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">Worker</span> <span class="nx">from</span> <span class="s2">&quot;worker-loader!./Worker&quot;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Worker</span><span class="p">();</span>

<span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span> <span class="nx">a</span>: <span class="kt">1</span> <span class="p">});</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{};</span>

<span class="nx">worker</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{});</span>
</pre></div>
</div>
</div>
<div class="section" id="cross-origin-policy">
<h1><code class="docutils literal notranslate"><span class="pre">Cross-Origin</span> <span class="pre">Policy</span></code><a class="headerlink" href="#cross-origin-policy" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API"><code class="docutils literal notranslate"><span class="pre">WebWorkers</span></code></a> are restricted by a <a class="reference external" href="https://en.wikipedia.org/wiki/Same-origin_policy">same-origin policy</a>, so if your <code class="docutils literal notranslate"><span class="pre">webpack</span></code> assets are not being served from the same origin as your application, their download may be blocked by your browser. This scenario can commonly occur if you are hosting your assets under a CDN domain. Even downloads from the <code class="docutils literal notranslate"><span class="pre">webpack-dev-server</span></code> could be blocked. There are two workarounds</p>
<p>Firstly, you can inline the worker as a blob instead of downloading it as an external script via the <a class="reference external" href="#inline"><code class="docutils literal notranslate"><span class="pre">inline</span></code></a> parameter</p>
<p><strong>App.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">Worker</span> <span class="nx">from</span> <span class="s1">&#39;./file.worker.js&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>webpack.config.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">inline</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Secondly, you may override the base download URL for your worker script via the <a class="reference external" href="#publicpath"><code class="docutils literal notranslate"><span class="pre">publicPath</span></code></a> option</p>
<p><strong>App.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// This will cause the worker to be downloaded from `/workers/file.worker.js`</span>
<span class="kr">import</span> <span class="nx">Worker</span> <span class="nx">from</span> <span class="s1">&#39;./file.worker.js&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>webpack.config.js</strong></p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;worker-loader&#39;</span>
  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;/workers/&#39;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<h2 align="center">Maintainers</h2>
<table>
  <tbody>
    <tr>
      <td align="center">
        <a href="https://github.com/TrySound">
          <img width="150" height="150" src="https://avatars3.githubusercontent.com/u/5635476?v=3&s=150">
        </a>
        <br />
        <a href="https://github.com/TrySound">Bogdan Chadkin</a>
      </td>
      <td align="center">
        <a href="https://github.com/bebraw">
          <img width="150" height="150" src="https://github.com/bebraw.png?v=3&s=150">
          </br>
          Juho Vepsäläinen
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/d3viant0ne">
          <img width="150" height="150" src="https://github.com/d3viant0ne.png?v=3&s=150">
          </br>
          Joshua Wiens
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/michael-ciniawsky">
          <img width="150" height="150" src="https://github.com/michael-ciniawsky.png?v=3&s=150">
          </br>
          Michael Ciniawsky
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/evilebottnawi">
          <img width="150" height="150" src="https://github.com/evilebottnawi.png?v=3&s=150">
          </br>
          Alexander Krasnoyarov
        </a>
      </td>
    </tr>
  <tbody>
</table>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-worker-loader-2.0.0-45fda3ef76aca815771a89107399ee4119b430ac-integrity/node_modules/worker-loader"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Fred Mitchell<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../../../../../_static/js/index.js"></script>
    
  </body>
</html>