

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>stream-http &#8212; Colab Experiment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../../../../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-index--0afa1ebdab0bb23b98b56d34c23d9f57.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/spanels-variables--ffc7f74dcb1b9eecba2dbcbc22818714.css" />
    <script id="documentation_options" data-url_root="../../../../../../" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/language_data.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script src="../../../../../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../../../../../index.html">
  
  
  <h1 class="site-logo" id="site-title">Colab Experiment</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../README.html">
   jbook-209
  </a>
 </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/.cache/yarn/v6/npm-stream-http-2.8.3-b2d242469288a5a27ec4fe8933acf623de6514fc-integrity/node_modules/stream-http/README.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/fm75/jbook-209"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/fm75/jbook-209/issues/new?title=Issue%20on%20page%20%2F.cache/yarn/v6/npm-stream-http-2.8.3-b2d242469288a5a27ec4fe8933acf623de6514fc-integrity/node_modules/stream-http/README.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/fm75/jbook-209/edit/master/.cache/yarn/v6/npm-stream-http-2.8.3-b2d242469288a5a27ec4fe8933acf623de6514fc-integrity/node_modules/stream-http/README.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-does-it-do">
   What does it do?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ie8-note">
     IE8 note:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-do-you-use-it">
   How do you use it?
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extra-features-compared-to-node">
     Extra features compared to Node
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features-missing-compared-to-node">
     Features missing compared to Node
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example">
   Example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-tests">
   Running tests
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="stream-http-build-status">
<h1>stream-http <a class="reference external" href="https://travis-ci.org/jhiesey/stream-http"><img alt="Build Status" src="https://travis-ci.org/jhiesey/stream-http.svg?branch=master" /></a><a class="headerlink" href="#stream-http-build-status" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://saucelabs.com/u/stream-http"><img alt="Sauce Test Status" src="https://saucelabs.com/browser-matrix/stream-http.svg" /></a></p>
<p>This module is an implementation of Node’s native <code class="docutils literal notranslate"><span class="pre">http</span></code> module for the browser.
It tries to match Node’s API and behavior as closely as possible, but some features
aren’t available, since browsers don’t give nearly as much control over requests.</p>
<p>This is heavily inspired by, and intended to replace, <a class="reference external" href="https://github.com/substack/http-browserify">http-browserify</a>.</p>
<div class="section" id="what-does-it-do">
<h2>What does it do?<a class="headerlink" href="#what-does-it-do" title="Permalink to this headline">¶</a></h2>
<p>In accordance with its name, <code class="docutils literal notranslate"><span class="pre">stream-http</span></code> tries to provide data to its caller before
the request has completed whenever possible.</p>
<p>Backpressure, allowing the browser to only pull data from the server as fast as it is
consumed, is supported in:</p>
<ul class="simple">
<li><p>Chrome &gt;= 58 (using <code class="docutils literal notranslate"><span class="pre">fetch</span></code> and <code class="docutils literal notranslate"><span class="pre">WritableStream</span></code>)</p></li>
</ul>
<p>The following browsers support true streaming, where only a small amount of the request
has to be held in memory at once:</p>
<ul class="simple">
<li><p>Chrome &gt;= 43 (using the <code class="docutils literal notranslate"><span class="pre">fetch</span></code> API)</p></li>
<li><p>Firefox &gt;= 9 (using <code class="docutils literal notranslate"><span class="pre">moz-chunked-arraybuffer</span></code> responseType with xhr)</p></li>
</ul>
<p>The following browsers support pseudo-streaming, where the data is available before the
request finishes, but the entire response must be held in memory:</p>
<ul class="simple">
<li><p>Chrome</p></li>
<li><p>Safari &gt;= 5, and maybe older</p></li>
<li><p>IE &gt;= 10</p></li>
<li><p>Most other Webkit-based browsers, including the default Android browser</p></li>
</ul>
<p>All browsers newer than IE8 support binary responses. All of the above browsers that
support true streaming or pseudo-streaming support that for binary data as well
except for IE10. Old (presto-based) Opera also does not support binary streaming either.</p>
<div class="section" id="ie8-note">
<h3>IE8 note:<a class="headerlink" href="#ie8-note" title="Permalink to this headline">¶</a></h3>
<p>As of version 2.0.0, IE8 support requires the user to supply polyfills for
<code class="docutils literal notranslate"><span class="pre">Object.keys</span></code>, <code class="docutils literal notranslate"><span class="pre">Array.prototype.forEach</span></code>, and <code class="docutils literal notranslate"><span class="pre">Array.prototype.indexOf</span></code>. Example
implementations are provided in <span class="xref myst">ie8-polyfill.js</span>; alternately,
you may want to consider using <a class="reference external" href="https://github.com/es-shims/es5-shim">es5-shim</a>.
All browsers with full ES5 support shouldn’t require any polyfills.</p>
</div>
</div>
<div class="section" id="how-do-you-use-it">
<h2>How do you use it?<a class="headerlink" href="#how-do-you-use-it" title="Permalink to this headline">¶</a></h2>
<p>The intent is to have the same API as the client part of the
<a class="reference external" href="https://nodejs.org/api/http.html">Node HTTP module</a>. The interfaces are the same wherever
practical, although limitations in browsers make an exact clone of the Node API impossible.</p>
<p>This module implements <code class="docutils literal notranslate"><span class="pre">http.request</span></code>, <code class="docutils literal notranslate"><span class="pre">http.get</span></code>, and most of <code class="docutils literal notranslate"><span class="pre">http.ClientRequest</span></code>
and <code class="docutils literal notranslate"><span class="pre">http.IncomingMessage</span></code> in addition to <code class="docutils literal notranslate"><span class="pre">http.METHODS</span></code> and <code class="docutils literal notranslate"><span class="pre">http.STATUS_CODES</span></code>. See the
Node docs for how these work.</p>
<div class="section" id="extra-features-compared-to-node">
<h3>Extra features compared to Node<a class="headerlink" href="#extra-features-compared-to-node" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">message.url</span></code> property provides access to the final URL after all redirects. This
is useful since the browser follows all redirects silently, unlike Node. It is available
in Chrome 37 and newer, Firefox 32 and newer, and Safari 9 and newer.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">options.withCredentials</span></code> boolean flag, used to indicate if the browser should send
cookies or authentication information with a CORS request. Default false.</p></li>
</ul>
<p>This module has to make some tradeoffs to support binary data and/or streaming. Generally,
the module can make a fairly good decision about which underlying browser features to use,
but sometimes it helps to get a little input from the developer.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">options.mode</span></code> field passed into <code class="docutils literal notranslate"><span class="pre">http.request</span></code> or <code class="docutils literal notranslate"><span class="pre">http.get</span></code> can take on one of the
following values:</p>
<ul>
<li><p>‘default’ (or any falsy value, including <code class="docutils literal notranslate"><span class="pre">undefined</span></code>): Try to provide partial data before
the request completes, but not at the cost of correctness for binary data or correctness of
the ‘content-type’ response header. This mode will also avoid slower code paths whenever
possible, which is particularly useful when making large requests in a browser like Safari
that has a weaker JavaScript engine.</p></li>
<li><p>‘allow-wrong-content-type’: Provides partial data in more cases than ‘default’, but
at the expense of causing the ‘content-type’ response header to be incorrectly reported
(as ‘text/plain; charset=x-user-defined’) in some browsers, notably Safari and Chrome 42
and older. Preserves binary data whenever possible. In some cases the implementation may
also be a bit slow. This was the default in versions of this module before 1.5.</p></li>
<li><p>‘prefer-stream’: Provide data before the request completes even if binary data (anything
that isn’t a single-byte ASCII or UTF8 character) will be corrupted. Of course, this option
is only safe for text data. May also cause the ‘content-type’ response header to be
incorrectly reported (as ‘text/plain; charset=x-user-defined’).</p></li>
<li><p>‘disable-fetch’: Force the use of plain XHR regardless of the browser declaring a fetch
capability. Preserves the correctness of binary data and the ‘content-type’ response header.</p></li>
<li><p>‘prefer-fast’: Deprecated; now a synonym for ‘default’, which has the same performance
characteristics as this mode did in versions before 1.5.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">options.requestTimeout</span></code> allows setting a timeout in millisecionds for XHR and fetch (if
supported by the browser). This is a limit on how long the entire process takes from
beginning to end. Note that this is not the same as the node <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code> functions,
which apply to pauses in data transfer over the underlying socket, or the node <code class="docutils literal notranslate"><span class="pre">timeout</span></code>
option, which applies to opening the connection.</p></li>
</ul>
</div>
<div class="section" id="features-missing-compared-to-node">
<h3>Features missing compared to Node<a class="headerlink" href="#features-missing-compared-to-node" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">http.Agent</span></code> is only a stub</p></li>
<li><p>The ‘socket’, ‘connect’, ‘upgrade’, and ‘continue’ events on <code class="docutils literal notranslate"><span class="pre">http.ClientRequest</span></code>.</p></li>
<li><p>Any operations, including <code class="docutils literal notranslate"><span class="pre">request.setTimeout</span></code>, that operate directly on the underlying
socket.</p></li>
<li><p>Any options that are disallowed for security reasons. This includes setting or getting
certain headers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message.httpVersion</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message.rawHeaders</span></code> is modified by the browser, and may not quite match what is sent by
the server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message.trailers</span></code> and <code class="docutils literal notranslate"><span class="pre">message.rawTrailers</span></code> will remain empty.</p></li>
<li><p>Redirects are followed silently by the browser, so it isn’t possible to access the 301/302
redirect pages.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">timeout</span></code> event/option and <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code> functions, which operate on the underlying
socket, are not available. However, see <code class="docutils literal notranslate"><span class="pre">options.requestTimeout</span></code> above.</p></li>
</ul>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/bundle.js&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;result&#39;</span><span class="p">);</span>
	<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s1">&#39;GET /beep&lt;br&gt;&#39;</span><span class="p">;</span>

	<span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">buf</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="nx">buf</span><span class="p">;</span>
	<span class="p">});</span>

	<span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s1">&#39;&lt;br&gt;__END__&#39;</span><span class="p">;</span>
	<span class="p">});</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="running-tests">
<h2>Running tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<p>There are two sets of tests: the tests that run in Node (found in <code class="docutils literal notranslate"><span class="pre">test/node</span></code>) and the tests
that run in the browser (found in <code class="docutils literal notranslate"><span class="pre">test/browser</span></code>). Normally the browser tests run on
<a class="reference external" href="http://saucelabs.com/">Sauce Labs</a>.</p>
<p>Running <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">test</span></code> will run both sets of tests, but in order for the Sauce Labs tests to run
you will need to sign up for an account (free for open source projects) and put the
credentials in a <a class="reference external" href="https://github.com/defunctzombie/zuul/wiki/zuulrc"><code class="docutils literal notranslate"><span class="pre">.zuulrc</span></code> file</a>.</p>
<p>To run just the Node tests, run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">test-node</span></code>.</p>
<p>To run the browser tests locally, run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">test-browser-local</span></code> and point your browser to
<code class="docutils literal notranslate"><span class="pre">http://localhost:8080/__zuul</span></code></p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>MIT. Copyright (C) John Hiesey and other contributors.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./.cache/yarn/v6/npm-stream-http-2.8.3-b2d242469288a5a27ec4fe8933acf623de6514fc-integrity/node_modules/stream-http"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Fred Mitchell<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../../../../../_static/js/index.js"></script>
    
  </body>
</html>